(this.webpackJsonpfrontendtask=this.webpackJsonpfrontendtask||[]).push([[0],{24:function(e,t,a){e.exports=a(42)},30:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a.n(r),s=a(22),i=a.n(s);a(29),a(30),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(31);var o=a(19),c=a(9),l=a(10),u=a(12),m=a(11),d=a(13),h=a(23),p=a(16);a(45),a(32),a(35),a(43),a(44);p.a.initializeApp({apiKey:"AIzaSyB8xgreKji3ujpUtXKA9bAB-gHSvFEvzz4",authDomain:"fakeshop-240cf.firebaseapp.com",projectId:"fakeshop-240cf",storageBucket:"fakeshop-240cf.appspot.com",messagingSenderId:"56776785502",appId:"1:56776785502:web:f97bd1adfcf70681ad7ecf"}),p.a.firestore();var g=p.a,f=function(e){var t=e.category,a=e.price,s=e.id,i=e.img,o=e.title,c=e.description,l=e.quantity,u=Object(r.useState)(""),m=Object(h.a)(u,2),d=m[0],p=m[1];return n.a.createElement("div",{className:"tc bg-light-green dib br3 pa3 ma2 grow bw2 shadow-5"},n.a.createElement("img",{alt:"products",src:i,width:"200px",height:"200px"}),n.a.createElement("div",null,n.a.createElement("h2",null,"price: ",a),n.a.createElement("h3",null,"category: ",t),n.a.createElement("h4",null,"Quantity:",l),n.a.createElement("button",{style:{backgroundColor:"#054666",color:"white",border:"none",padding:"10px 10px",display:"inline-block",margin:"4px 30px",borderRadius:"5px"},onClick:function(){return function(){var e=g.auth().currentUser,r=g.firestore(),n="";r.collection("users").onSnapshot((function(t){var a=[];t.forEach((function(e){return a.push(e.data())}));var r=a.find((function(t){return t.email===e.email}));n=r.cart.find((function(e){return e.id===s})),p(n)})),d?alert("this item already in your cart"):void 0===d&&(r.collection("users").doc(e.uid).update({cart:g.firestore.FieldValue.arrayUnion({category:t,price:a,image:i,title:o,description:c,id:s,quantity:l})}),alert("added succefully"))}()}},"add to cart")))},E=function(e){var t=e.products;return n.a.createElement("div",null,t.map((function(e){return n.a.createElement(f,{key:e.id,id:e.id,category:e.category,price:e.price,img:e.image,title:e.title,description:e.description,quantity:e.quantity})})))},v=function(e){var t=e.searchChange;return n.a.createElement("div",{className:"pa2"},n.a.createElement("input",{className:"pa3 ba b--green bg-lightest-blue",type:"search",placeholder:"search by category",onChange:t}))},b=(a(37),function(e){return n.a.createElement("div",{style:{overflowY:"scroll",border:"1px solid black",height:"800px"}},e.children)}),y=(a(38),function(e){function t(){var e,a;Object(c.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).signOut=function(){g.auth().signOut(),a.props.onRouteChange("signout")},a.goHome=function(){"cart"===a.props.route&&a.props.onRouteChange("home")},a.getCartProducts=function(){a.props.onRouteChange("cart");var e=g.auth().currentUser;null!==e&&(console.log(e.email),g.firestore().collection("users").onSnapshot((function(t){var r=[];t.forEach((function(e){return r.push(e.data())})),console.log("users",r);var n=r.find((function(t){return t.email===e.email}));console.log("obj",n.cart),a.props.setCartProducts(n.cart)})))},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"upperDiv"},n.a.createElement("div",{style:{display:"flex",justifyContent:"center",paddingLeft:"5px",paddingRight:"30px"}},n.a.createElement("button",{onClick:this.goHome,className:"shopName",style:{marginLeft:"100px"}},"FAKESHOP")),!this.props.user||"home"!==this.props.route&&"cart"!==this.props.route?"admin"===this.props.route&&this.props.user?n.a.createElement("button",{onClick:this.signOut,className:"navigationBtns"}," Signout"):n.a.createElement("div",null,n.a.createElement("button",{onClick:function(){return e.props.onRouteChange("signin")},className:"navigationBtns"}," SignIn"),n.a.createElement("button",{onClick:function(){return e.props.onRouteChange("register")},className:"navigationBtns"}," Register")):n.a.createElement("div",null,n.a.createElement("button",{onClick:this.getCartProducts,className:"navigationBtns"}," My Cart"),n.a.createElement("button",{onClick:this.signOut,className:"navigationBtns"}," Signout")))}}]),t}(r.Component)),C=a(14),w=a.n(C),k=a(15),x=(a(40),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).onNameChange=function(e){a.setState({name:e.target.value})},a.onEmailChange=function(e){a.setState({email:e.target.value})},a.onPasswordChange=function(e){a.setState({password:e.target.value})},a.clearErrors=function(){a.setState({EmailError:"",PasswordError:""})},a.setUserProfileData=function(e){g.firestore().collection("users").doc(e.uid).set({name:e.displayName,email:e.email,cart:[]})},a.onSubmitRegister=Object(k.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.auth().createUserWithEmailAndPassword(a.state.email,a.state.password);case 3:return t=e.sent,a.props.onRouteChange("home"),e.next=7,t.user.updateProfile({displayName:a.state.name});case 7:return e.next=9,a.setUserProfileData(t.user);case 9:return e.abrupt("return",e.sent);case 12:e.prev=12,e.t0=e.catch(0),e.t1=e.t0.code,e.next="auth/eamil-already-in-use"===e.t1?17:"auth/invalid-email"===e.t1?17:"auth/weak-password"===e.t1?19:21;break;case 17:return a.setState({EmailError:e.t0.message}),e.abrupt("break",22);case 19:return a.setState({PasswordError:e.t0.message}),e.abrupt("break",22);case 21:alert("register error");case 22:case"end":return e.stop()}}),e,null,[[0,12]])}))),a.state={name:"",email:"",password:"",EmailError:"",PasswordError:""},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"mainForm"},n.a.createElement("div",{className:"registerFormDiv"},n.a.createElement("div",{className:"innerDiv"},n.a.createElement("label",null," Name"),n.a.createElement("input",{onChange:this.onNameChange,className:"registerInput"})),n.a.createElement("div",{className:"innerDiv"},n.a.createElement("label",null," Email"),n.a.createElement("input",{required:!0,type:"text",onChange:this.onEmailChange,className:"registerInput"}),n.a.createElement("p",{style:{color:"red"}},this.state.EmailError)),n.a.createElement("div",{className:"innerDiv"},n.a.createElement("label",null," Password"),n.a.createElement("input",{required:!0,type:"password",onChange:this.onPasswordChange,className:"registerInput"}),n.a.createElement("p",{style:{color:"red"}},this.state.PasswordError)),n.a.createElement("button",{onClick:this.onSubmitRegister,className:"registerBtn"}," Register")))}}]),t}(r.Component)),S=(a(41),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).onEmailChange=function(e){a.setState({signInEmail:e.target.value})},a.onPasswordChange=function(e){a.setState({signInPassword:e.target.value})},a.clearErrors=function(){a.setState({EmailError:"",PasswordError:""})},a.onSubmitSignin=Object(k.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.clearErrors(),e.next=4,g.auth().signInWithEmailAndPassword(a.state.signInEmail,a.state.signInPassword);case 4:"admin@gmail.com"===g.auth().currentUser.email?a.props.onRouteChange("admin"):a.props.onRouteChange("home"),e.next=18;break;case 8:e.prev=8,e.t0=e.catch(0),e.t1=e.t0.code,e.next="auth/invalid-email"===e.t1?13:"auth/user-disabled"===e.t1?13:"auth/user-not-found"===e.t1?13:"auth/wrong-password"===e.t1?15:17;break;case 13:return a.setState({EmailError:e.t0.message}),e.abrupt("break",18);case 15:return a.setState({PasswordError:e.t0.message}),e.abrupt("break",18);case 17:alert("signin error");case 18:case"end":return e.stop()}}),e,null,[[0,8]])}))),a.state={signInEmail:"",signInPassword:"",EmailError:"",PasswordError:""},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"mainForm"},n.a.createElement("div",{className:"registerFormDiv"},n.a.createElement("div",{className:"innerDiv"},n.a.createElement("label",null," Email"),n.a.createElement("input",{required:!0,type:"text",onChange:this.onEmailChange,className:"registerInput"}),n.a.createElement("p",{style:{color:"red"}},this.state.EmailError)),n.a.createElement("div",{className:"innerDiv"},n.a.createElement("label",null," Password"),n.a.createElement("input",{required:!0,type:"password",onChange:this.onPasswordChange,className:"registerInput"}),n.a.createElement("p",{className:"errorMsg"},this.state.PasswordError)),n.a.createElement("button",{onClick:this.onSubmitSignin,className:"registerBtn"}," ","SignIn")))}}]),t}(r.Component)),N=function(e){var t=e.category,a=e.price,r=e.img,s=e.id;return n.a.createElement("div",{className:"tc bg-light-green dib br3 pa3 ma2 grow bw2 shadow-5"},n.a.createElement("img",{alt:"products",src:r,width:"200px",height:"200px"}),n.a.createElement("div",null,n.a.createElement("h2",null,"price: ",a),n.a.createElement("h3",null,"category: ",t),n.a.createElement("button",{style:{backgroundColor:"teal",color:"white",border:"none",padding:"10px 10px",display:"inline-block",margin:"4px 30px",borderRadius:"5px"},onClick:function(){return function(){var e=g.firestore(),t=g.firestore.FieldValue.increment(-1);e.collection("products").doc(s).update({quantity:t}),alert("Successfully purchased")}()}},"checkout"),n.a.createElement("button",{style:{backgroundColor:"#F34541",color:"white",border:"none",padding:"10px 10px",display:"inline-block",margin:"4px 30px",borderRadius:"5px"},onClick:function(){return function(){var e=g.auth().currentUser,t=g.firestore();t.collection("users").onSnapshot((function(a){var r=[];a.forEach((function(e){return r.push(e.data())}));var n=r.find((function(t){return t.email===e.email}));t.collection("users").doc(e.uid).update({cart:n.cart.filter((function(e){return e.id!==s}))})})),alert("deleted succefully")}()}},"delete")))},P=function(e){var t=e.cartProducts;return n.a.createElement("div",null,t.map((function(e){return n.a.createElement(N,{key:e.id,category:e.category,price:e.price,img:e.image,id:e.id})})))},j=function(e){var t=e.user;return n.a.createElement("div",{style:{margin:"auto",width:"70%",padding:"10px"},className:"ui segments"},n.a.createElement("div",{className:"ui segment"},n.a.createElement("h3",{style:{textAlign:"left",marginLeft:"80px"}},t.name),n.a.createElement("p",{style:{textAlign:"left",marginLeft:"80px"}},t.email)),n.a.createElement("div",{className:"ui secondary segment"},n.a.createElement("table",{style:{width:"90%",margin:"auto"},className:"ui celled table"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Category"),n.a.createElement("th",null,"Price"),n.a.createElement("th",null,"Title"))),n.a.createElement("tbody",null,t.cart.map((function(e){return n.a.createElement("tr",null,n.a.createElement("td",null,e.category),n.a.createElement("td",null,e.price),n.a.createElement("td",null,e.title))}))))))},O=function(e){var t=e.users.filter((function(e){return"admin@gmail.com"!==e.email}));return n.a.createElement("div",null,t.map((function(e){return n.a.createElement(j,{key:e.id,user:e})})))},R=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).authListenser=function(){g.auth().onAuthStateChanged((function(t){t?e.setState({user:t}):e.setState({user:""})}))},e.getProducts=function(){g.firestore().collection("products").onSnapshot((function(t){var a=[];t.forEach((function(e){return a.push(Object(o.a)({},e.data(),{id:e.id}))})),e.setState({products:a})}))},e.setCartProducts=function(t){e.setState({cartProducts:t})},e.getUsers=function(){g.firestore().collection("users").onSnapshot((function(t){var a=[];t.forEach((function(e){return a.push(Object(o.a)({},e.data(),{id:e.id}))})),e.setState({users:a})}))},e.onSearchChange=function(t){e.setState({searchfield:t.target.value})},e.onRouteChange=function(t){e.setState({route:t})},e.state={products:[],searchfield:"",route:"signin",user:"",cartProducts:[],users:[]},e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.authListenser(),this.getProducts(),this.getUsers()}},{key:"render",value:function(){var e=this,t=this.state.products.filter((function(t){return t.category.toLowerCase().includes(e.state.searchfield.toLowerCase())}));return n.a.createElement("div",{className:"tc"},n.a.createElement(y,{setCartProducts:this.setCartProducts,onRouteChange:this.onRouteChange,user:this.state.user,route:this.state.route}),this.state.user&&"home"===this.state.route?n.a.createElement("div",null,n.a.createElement(v,{searchChange:this.onSearchChange}),n.a.createElement(b,null,n.a.createElement(E,{products:t}))):"signin"===this.state.route?n.a.createElement(S,{onRouteChange:this.onRouteChange}):"signout"===this.state.route||"register"===this.state.route?n.a.createElement(x,{onRouteChange:this.onRouteChange}):"cart"===this.state.route&&this.state.user?n.a.createElement("div",{style:{marginTop:"20px"}},n.a.createElement(b,null,n.a.createElement(P,{cartProducts:this.state.cartProducts}))):"admin"===this.state.route&&this.state.user?n.a.createElement("div",{style:{marginTop:"20px"}},n.a.createElement(b,null,n.a.createElement(O,{users:this.state.users}))):n.a.createElement(n.a.Fragment,null))}}]),t}(r.Component);i.a.render(n.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.59e2a1db.chunk.js.map